[run]
branch = True

# Workaround for bug https://github.com/nedbat/coveragepy/issues/883#issuecomment-570093918
parallel = True

disable_warnings =
    module-not-measured

# All paths are relative to each tox.ini
omit =
    */test_bench.py
    */test_e2e*.py
    */test_e2e*/*

    # Configuration models
    # TODO: remove when python 2 is dropped
    */khulnasoft_checks/*/config_models/*

    # Vendored dependencies
    */khulnasoft_checks/*/vendor/*

    # These are things that are simply stored in the base package
    ../khulnasoft_checks_base/khulnasoft_checks/base/checks/libs/*
    ../khulnasoft_checks_base/khulnasoft_checks/base/checks/win/*

    # Ignore any plugins
    ../khulnasoft_checks_dev/khulnasoft_checks/dev/plugin/*

    # We will test more repo tooling eventually
    ../khulnasoft_checks_dev/khulnasoft_checks/dev/tooling/commands/*
    ../khulnasoft_checks_dev/khulnasoft_checks/dev/tooling/config_validator/*
    ../khulnasoft_checks_dev/khulnasoft_checks/dev/tooling/e2e/*
    ../khulnasoft_checks_dev/khulnasoft_checks/dev/tooling/clean.py
    ../khulnasoft_checks_dev/khulnasoft_checks/dev/tooling/cli.py
    ../khulnasoft_checks_dev/khulnasoft_checks/dev/tooling/config.py
    ../khulnasoft_checks_dev/khulnasoft_checks/dev/tooling/github.py
    ../khulnasoft_checks_dev/khulnasoft_checks/dev/tooling/release.py
    ../khulnasoft_checks_dev/khulnasoft_checks/dev/tooling/signing.py
    ../khulnasoft_checks_dev/khulnasoft_checks/dev/tooling/testing.py
    ../khulnasoft_checks_dev/khulnasoft_checks/dev/tooling/trello.py
    ../khulnasoft_checks_dev/khulnasoft_checks/dev/tooling/utils.py

[report]
show_missing = True
ignore_errors = True

exclude_lines =
    no cov
    no qa

    # Ignore missing debug-only code
    def __repr__
    if self\.debug

    # Ignore non-runnable code
    if __name__ == .__main__.:
